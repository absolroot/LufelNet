<!DOCTYPE html>
<html>
<head>
    <title>Background Music</title>
</head>
<body>
    <audio id="background-audio" loop>
        <source src="Gone with the Storm.mp3" type="audio/mpeg">
    </audio>
    <script>
        const audio = document.getElementById('background-audio');
        
        // 음소거 상태로 시작
        audio.muted = true;

        // 부모 창에서 보낸 메시지 수신
        window.addEventListener('message', (event) => {
            if (event.data === 'play') {
                audio.muted = false;  // 음소거 해제
                audio.play();
            } else if (event.data === 'pause') {
                audio.pause();
            }
        });

        // 현재 재생 상태를 부모 창에 전송
        audio.addEventListener('play', () => {
            window.parent.postMessage('playing', '*');
        });

        audio.addEventListener('pause', () => {
            window.parent.postMessage('paused', '*');
        });

        // 초기 자동 재생 시도
        audio.play().catch(() => {
            console.log('Autoplay prevented');
        });
    </script>
</body>
</html>